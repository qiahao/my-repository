webpackJsonp([29],{1115:function(e,t,a){a(1497);var i=a(10)(a(1301),a(1664),"data-v-4bd86f9a",null);e.exports=i.exports},1140:function(e,t,a){var i,n,r;!function(a,o){n=[t],i=o,void 0!==(r="function"==typeof i?i.apply(t,n):i)&&(e.exports=r)}(0,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={data:function(){return{usedId:"",routeName:""}},computed:{id:function(){return this.$route.params.id}},watch:{id:function(e,t){e&&this.$route.name==this.routeName&&(this.usedId=e)},usedId:function(e,t){this.init()}},methods:{init:function(){console.warn("[wran] rewrite < "+this.$options.name+" > component’s init function witch with detail-child-mixin")}},created:function(){this.usedId=this.id,this.routeName=this.$route.name},mounted:function(){}};e.default=t})},1141:function(e,t,a){(function(a){var i,n,r;!function(a,o){n=[t],i=o,void 0!==(r="function"==typeof i?i.apply(t,n):i)&&(e.exports=r)}(0,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={name:"detailModal",props:{value:{type:Boolean,require:!0}},data:function(){return{modal:this.value}},computed:{headClasses:function(){return["detail-modal-head"]},mainClasses:function(){return["detail-modal-main"]},footClasses:function(){return["detail-modal-foot"]}},watch:{value:function(e){this.modal=e}},methods:{close:function(){this.modal=!1,this.$emit("input",!1),this.$emit("on-detail-close"),a.$emit("on-detail-close")}},created:function(){},mounted:function(){}}})}).call(t,a(227))},1142:function(e,t,a){var i,n,r;!function(o,d){n=[t,a(1140)],i=d,void 0!==(r="function"==typeof i?i.apply(t,n):i)&&(e.exports=r)}(0,function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(t);e.default={data:function(){return{detailShow:!1}},mixins:[a.default],methods:{},mounted:function(){var e=this;setTimeout(function(){e.detailShow=!0},500)},activated:function(){this.detailShow=!0},deactivated:function(){this.detailShow=!1},beforeRouteUpdate:function(e,t,a){var i=this;this.detailShow=!1,setTimeout(function(){i.detailShow=!0,a()},300)}}})},1143:function(e,t,a){t=e.exports=a(1083)(),t.push([e.i,".detail-modal{position:fixed;z-index:7;top:50px;right:0;bottom:0;width:880px;border-left:1px solid #dddee1;box-shadow:-1px 0 3px #dddee1;background:#fff}.detail-modal.has-head .detail-modal-head{display:block;z-index:7}.detail-modal.has-head .detail-modal-main{padding-top:53px}.detail-modal.has-foot .detail-modal-foot{display:block}.detail-modal.has-foot .detail-modal-main{padding-bottom:44px}.detail-modal .tit{font-size:16px}.detail-modal .ivu-icon-close-round{position:absolute;top:17px;right:14px;color:#8492a6;font-size:20px;cursor:pointer;z-index:7}.detail-modal .ivu-icon-close-round:hover{opacity:.7}.detail-modal-foot,.detail-modal-head{position:absolute;left:0;right:0;display:none;padding-left:20px}.detail-modal-head{top:0;height:53px;padding-top:2px;padding-bottom:1px;padding-right:39px;border-bottom:1px solid #e6e6e6;line-height:49px}.detail-modal-main{position:relative;height:100%}.detail-modal-main .inner{height:100%;padding:10px 20px;overflow-x:hidden;overflow-y:auto}.detail-modal-foot{bottom:0;height:44px;border-top:1px solid #e6e6e6;padding-top:1px;padding-bottom:2px;line-height:49px}.fix-modal-main .inner{background:#fbfbfb!important}.detail-modal .ivu-tabs{position:inherit}.detail-modal .detail-foot{position:absolute;bottom:0;left:0;right:0;box-shadow:0 -1px 2px 1px #dedede;background:#fff;padding:5px}.detail-modal .detail-foot .foot-inner{background:#f2f2f2;padding:5px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/common/detail-modal/detail-modal.scss"],names:[],mappings:"AACA,cACE,eAAgB,AAChB,UAAW,AACX,SAAU,AACV,QAAS,AACT,SAAU,AACV,YAAa,AACb,8BAA+B,AAC/B,8BAA+B,AAC/B,eAAiB,CAClB,AACD,0CACI,cAAe,AACf,SAAW,CACd,AACD,0CACI,gBAAkB,CACrB,AACD,0CACI,aAAe,CAClB,AACD,0CACI,mBAAqB,CACxB,AACD,mBACI,cAAgB,CACnB,AACD,oCACI,kBAAmB,AACnB,SAAU,AACV,WAAY,AACZ,cAAe,AACf,eAAgB,AAChB,eAAgB,AAChB,SAAW,CACd,AACD,0CACM,UAAY,CACjB,AACD,sCACE,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,aAAc,AACd,iBAAmB,CACpB,AACD,mBACE,MAAO,AACP,YAAa,AACb,gBAAiB,AACjB,mBAAoB,AACpB,mBAAoB,AACpB,gCAAiC,AACjC,gBAAkB,CACnB,AACD,mBACE,kBAAmB,AACnB,WAAa,CACd,AACD,0BACI,YAAa,AACb,kBAAmB,AACnB,kBAAmB,AACnB,eAAiB,CACpB,AACD,mBACE,SAAU,AACV,YAAa,AACb,6BAA8B,AAC9B,gBAAiB,AACjB,mBAAoB,AACpB,gBAAkB,CACnB,AACD,uBACE,4BAA+B,CAChC,AACD,wBACE,gBAAkB,CACnB,AACD,2BACE,kBAAmB,AACnB,SAAU,AACV,OAAQ,AACR,QAAS,AACT,kCAAqC,AACrC,gBAAiB,AACjB,WAAa,CACd,AACD,uCACI,mBAAoB,AACpB,WAAa,CAChB",file:"detail-modal.scss",sourcesContent:["\n.detail-modal {\n  position: fixed;\n  z-index: 7;\n  top: 50px;\n  right: 0;\n  bottom: 0;\n  width: 880px;\n  border-left: 1px solid #dddee1;\n  box-shadow: -1px 0 3px #dddee1;\n  background: #fff;\n}\n.detail-modal.has-head .detail-modal-head {\n    display: block;\n    z-index: 7;\n}\n.detail-modal.has-head .detail-modal-main {\n    padding-top: 53px;\n}\n.detail-modal.has-foot .detail-modal-foot {\n    display: block;\n}\n.detail-modal.has-foot .detail-modal-main {\n    padding-bottom: 44px;\n}\n.detail-modal .tit {\n    font-size: 16px;\n}\n.detail-modal .ivu-icon-close-round {\n    position: absolute;\n    top: 17px;\n    right: 14px;\n    color: #8492a6;\n    font-size: 20px;\n    cursor: pointer;\n    z-index: 7;\n}\n.detail-modal .ivu-icon-close-round:hover {\n      opacity: .7;\n}\n.detail-modal-head, .detail-modal-foot {\n  position: absolute;\n  left: 0;\n  right: 0;\n  display: none;\n  padding-left: 20px;\n}\n.detail-modal-head {\n  top: 0;\n  height: 53px;\n  padding-top: 2px;\n  padding-bottom: 1px;\n  padding-right: 39px;\n  border-bottom: 1px solid #e6e6e6;\n  line-height: 49px;\n}\n.detail-modal-main {\n  position: relative;\n  height: 100%;\n}\n.detail-modal-main .inner {\n    height: 100%;\n    padding: 10px 20px;\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n.detail-modal-foot {\n  bottom: 0;\n  height: 44px;\n  border-top: 1px solid #e6e6e6;\n  padding-top: 1px;\n  padding-bottom: 2px;\n  line-height: 49px;\n}\n.fix-modal-main .inner {\n  background: #fbfbfb !important;\n}\n.detail-modal .ivu-tabs {\n  position: inherit;\n}\n.detail-modal .detail-foot {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  box-shadow: 0px -1px 2px 1px #dedede;\n  background: #fff;\n  padding: 5px;\n}\n.detail-modal .detail-foot .foot-inner {\n    background: #f2f2f2;\n    padding: 5px;\n}\n"],sourceRoot:""}])},1144:function(e,t,a){var i=a(1143);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(1084)("2c3d1bbe",i,!0)},1145:function(e,t,a){a(1144);var i=a(10)(a(1141),a(1146),null,null);e.exports=i.exports},1146:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slide-right"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.modal,expression:"modal"}],staticClass:"detail-modal",class:{"has-head":e.$slots.head,"has-foot":e.$slots.foot}},[e.$slots.head?a("div",{class:e.headClasses},[e._t("head")],2):e._e(),e._v(" "),a("div",{class:e.mainClasses},[a("div",{staticClass:"inner"},[e._t("default")],2)]),e._v(" "),e.$slots.foot?a("div",{class:e.footClasses},[e._t("foot")],2):e._e(),e._v(" "),a("Icon",{attrs:{type:"close-round"},nativeOn:{click:function(t){return e.close(t)}}})],1)])},staticRenderFns:[]}},1301:function(e,t,a){(function(i){var n,r,o;!function(i,d){r=[t,a(24),a(150),a(1145),a(1142),a(494),a(155),a(482)],n=d,void 0!==(o="function"==typeof n?n.apply(t,r):n)&&(e.exports=o)}(0,function(e,t,a,n,r,o,d,l){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var s=p(t),A=p(a),c=p(n),u=p(r),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o),f=p(l),h=/^1[3|4|5|7|8|][\d]{9}$/,C={partener_type:[{required:!0,message:"这是必填项"}],partener_name:[{required:!0,message:"这是必填项"}],partener_link_man:[{required:!0,message:"这是必填项"}],partener_link_tel:[{required:!0,message:"这是必填项"},{validator:f.default.phone,trigger:"blur"}],partener_area:[{required:!0,message:"这是必填项"}],partener_addr:[{required:!0,message:"这是必填项"}]},_={partener_type:"0",partener_name:"",partener_link_man:"",partener_link_tel:"",partener_area:"",partener_area_code:"",partener_addr:"",partener_lng:"",partener_lat:"",partener_shipper_id:""};e.default={name:"siteDetail",data:function(){return{siteId:"",provinceTemp:"110100",siteRule:(0,A.default)(C),parterDetail:{},center_pixel:[],addrMap:null,model:{show:!1,title:"合作网点详情"},mapModal:{show:!1},provinces:"110100"}},components:{detailModal:c.default},mixins:[u.default],computed:{id:function(){return this.$route.params.id}},watch:{provinceTemp:function(e){var t=e.split("$");this.parterDetail.partener_area_code=t[0],this.parterDetail.partener_area=t[1]},"parterDetail.partener_link_tel":function(e){var t=this;!this.siteId&&e&&h.test(e)&&m.siteDetailByMobile({mobile:e}).then(function(e){var a=e.resultObj;a&&(t.parterDetail.partener_name=a.company_name,t.parterDetail.partener_link_man=a.link_man,t.parterDetail.partener_area=a.company_area,t.parterDetail.partener_area_code=a.company_area_code,t.parterDetail.partener_addr=a.company_address,t.parterDetail.partener_lng=a.company_lng,t.parterDetail.partener_lat=a.company_lat,t.provinceTemp=t.parterDetail.partener_area_code+"$"+t.parterDetail.partener_area)})}},methods:{init:function(){this.id?this.loadDetail():(this.parterDetail=(0,s.default)({},_),this.provinceTemp="",this.model.title="邀请网点")},loadDetail:function(){var e=this,t={partener_id:this.id};this.$api.siteApi.siteDetail(t).then(function(t){e.parterDetail=(0,s.default)({},t.resultObj),e.provinceTemp=e.parterDetail.partener_area_code+"$"+e.parterDetail.partener_area})},close:function(){var e=this;setTimeout(function(){e.$router.push({name:"siteV1List"})},300)},mapSwitch:function(){this.mapModal.show=!0,this.addrMap={},this.addrMap.lng="",this.addrMap.lat="",this.addrMap.area=this.parterDetail.partener_area,this.addrMap.areaCode=this.parterDetail.partener_area_code,this.addrMap.address=this.parterDetail.partener_addr,this.parterDetail.partener_lng&&this.parterDetail.partener_lat&&(this.addrMap.lng=this.parterDetail.partener_lng,this.addrMap.lat=this.parterDetail.partener_lat)},procPixel:function(e){var t=this;e&&(this.parterDetail.partener_lng=e.lng.toString(),this.parterDetail.partener_lat=e.lat.toString(),this.parterDetail.partener_area_code=e.areaCode,this.parterDetail.partener_addr=e.addr,this.provinceTemp=this.parterDetail.partener_area_code,this.$nextTick(function(){t.parterDetail.partener_area=t.$refs.refProvince.$children[0].displayRender})),this.mapModal.show=!1},submitPartnerDetail:function(){var e=this;this.$refs.parterDetail.validate(function(t){if(t){var a=(0,s.default)({},e.parterDetail);e.parterDetail.partener_shipper_id?m.siteEdit(a).then(function(t){e.$Message.success("保存成功"),i.$emit("site-list-reload"),e.directBack()}):m.siteInvite(a).then(function(t){e.$Message.success("邀请成功"),i.$emit("site-list-reload"),e.directBack()})}})}},mounted:function(){}}})}).call(t,a(227))},1409:function(e,t,a){t=e.exports=a(1083)(),t.push([e.i,".amap-demo[data-v-4bd86f9a]{height:300px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/system/v1/site/detail.vue"],names:[],mappings:"AACA,4BACE,YAAc,CACf",file:"detail.vue",sourcesContent:["\n.amap-demo[data-v-4bd86f9a] {\n  height: 300px;\n}\n"],sourceRoot:""}])},1497:function(e,t,a){var i=a(1409);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(1084)("62eedc8c",i,!0)},1664:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("detail-modal",{staticStyle:{width:"900px"},on:{"on-detail-close":e.close},model:{value:e.detailShow,callback:function(t){e.detailShow=t},expression:"detailShow"}},[a("div",{attrs:{slot:"head"},slot:"head"},[e._v(e._s(e.model.title))]),e._v(" "),a("div",{staticStyle:{width:"85%"}},[a("Form",{ref:"parterDetail",attrs:{model:e.parterDetail,rules:e.siteRule,"label-width":130}},[a("Form-item",{attrs:{label:"合作关系",prop:"partener_type"}},[a("Radio-group",{model:{value:e.parterDetail.partener_type,callback:function(t){e.$set(e.parterDetail,"partener_type",t)},expression:"parterDetail.partener_type"}},[a("Radio",{attrs:{label:"0"}},[e._v("自有网点")]),e._v(" "),a("Radio",{attrs:{label:"1"}},[e._v("合作网点")])],1)],1),e._v(" "),a("Form-item",{attrs:{label:"网点／公司名称:",prop:"partener_name"}},[a("i-input",{model:{value:e.parterDetail.partener_name,callback:function(t){e.$set(e.parterDetail,"partener_name",t)},expression:"parterDetail.partener_name"}})],1),e._v(" "),a("Form-item",{attrs:{label:"联系人:",prop:"partener_link_man"}},[a("i-input",{model:{value:e.parterDetail.partener_link_man,callback:function(t){e.$set(e.parterDetail,"partener_link_man",t)},expression:"parterDetail.partener_link_man"}})],1),e._v(" "),a("Form-item",{attrs:{label:"手机号码:",prop:"partener_link_tel"}},[a("i-input",{model:{value:e.parterDetail.partener_link_tel,callback:function(t){e.$set(e.parterDetail,"partener_link_tel",t)},expression:"parterDetail.partener_link_tel"}})],1),e._v(" "),a("Form-item",{attrs:{label:"所在城市:",prop:"partener_area"}},[a("province-cascader",{ref:"refProvince",model:{value:e.provinceTemp,callback:function(t){e.provinceTemp=t},expression:"provinceTemp"}})],1),e._v(" "),a("Form-item",{attrs:{label:"详细地址",prop:"partener_addr"}},[a("i-input",{attrs:{icon:"location"},on:{"on-focus":e.mapSwitch},model:{value:e.parterDetail.partener_addr,callback:function(t){e.$set(e.parterDetail,"partener_addr",t)},expression:"parterDetail.partener_addr"}})],1),e._v(" "),a("div",{staticClass:"tc"},[a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.submitPartnerDetail("parterDetail")}}},[e._v("保存")])],1)],1)],1)]),e._v(" "),a("map-modal",{attrs:{mapModal:e.mapModal.show,addrMap:e.addrMap},on:{returnPoint:e.procPixel}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=29.dbfb1f8ad6dbeb57a840.js.map