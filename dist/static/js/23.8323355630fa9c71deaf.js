webpackJsonp([23],{1105:function(e,t,i){var o=i(10)(i(1285),i(1633),null,null);e.exports=o.exports},1137:function(e,t,i){var o,a,n;!function(s,r){a=[t,i(61),i(150)],o=r,void 0!==(n="function"==typeof o?o.apply(t,a):o)&&(e.exports=n)}(0,function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(t),n=o(i),s={data:function(){return{tableParams:{list:[],selectList:[],page:1,pageSize:10,total:0,isCheckBoxClick:!1}}},watch:{},computed:{hasSelect:function(){return!!this.tableParams.selectList.length},tableSelectLength:function(){return this.tableParams.selectList.length},currentPage:function(){return this.tableParams.page},selectedIds:function(){var e=this;return this.tableParams.selectList.map(function(t){return t[e.pk]})}},methods:{loadList:function(){this.$Message.info("请在页面实例重写loadList")},onSearch:function(){this.tableParams.page=1,this.tableParams.selectList=[],this.loadList()},onReset:function(){this.$refs.searchForm&&(this.$refs.searchForm.resetFields(),this.onRangeChange&&"function"==typeof this.onRangeChange&&(this.rangeTime=[],this.onRangeChange([])))},onSelectionChange:function(e){this.tableParams.selectList=(0,n.default)(e),this.tableParams.isCheckBoxClick=!0},onPageChange:function(e){this.tableParams.page=e,this.tableParams.selectList=[],this.loadList()},onPageSizeChange:function(e){this.tableParams.pageSize=e,this.onSearch()},assignQuery:function(e){return(0,a.default)({page:this.tableParams.page,page_size:this.tableParams.pageSize},e)}}};e.default=s})},1285:function(e,t,i){(function(o){var a,n,s;!function(o,r){n=[t,i(1137),i(485),i(228),i(1583),i(1584)],a=r,void 0!==(s="function"==typeof a?a.apply(t,n):a)&&(e.exports=s)}(0,function(e,t,i,a,n,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var l=r(t),d=(r(a),r(n)),c=r(s),u=["#febf06","#5ed25c","#0071c0","#fe850a","#9b9b9b"];e.default={name:"receiptList",data:function(){var e=this;return{conditionList:[{text:"全部",key:""},{text:"待回单",key:"0"},{text:"回单中",key:"1"},{text:"已回收",key:"2"},{text:"已发放",key:"3"},{text:"已结束",key:"4"}],conditionList2:[{text:"全部",key:""},{text:"到站运单",key:"0"},{text:"发出运单",key:"1"}],columns:[{type:"selection",width:60,align:"center"},{width:170,title:"运单号",key:"order_no"},{width:170,title:"上游单号",key:"pre_order_no"},{width:90,title:"回单状态",key:"back_state_desc",render:function(e,t){return e("span",{style:{color:u[t.row.back_state]}},t.row.back_state_desc)}},{width:90,title:"发货人",key:"begin_link_man"},{width:120,title:"联系方式",key:"begin_link_mobile"},{width:150,title:"始发地",key:"begin_area"},{width:150,title:"目的地",key:"end_area"},{width:100,title:"收货人",key:"end_link_man"},{width:120,title:"联系方式",key:"end_link_mobile"},{width:100,title:"物品名称",key:"c_names"},{width:80,title:"件数",key:"c_amounts"},{width:80,title:"重量",key:"c_weights"},{width:80,title:"体积",key:"c_volumes"},{width:80,title:"包装",key:"c_packs"},{width:180,title:"完成时间",key:"finish_time"},{width:80,title:"回单照片",fixed:"right",align:"center",render:function(t,i){return i.row.has_pics?t("span",{class:"text-primary",on:{click:function(){e.openPhotoModal(i.row)}}},"查看"):t("span","无")}}],search:{q_back_state:"",q_order_type:"",q_order_no:"",q_shipper_order_no:"",q_send_company:"",q_begin_link_mobile:"",q_receive_company:"",q_end_link_mobile:"",q_begin_area:"",q_end_area:"",q_cargo_name:"",q_cargo_pack:"",q_finish_time_begin:"",q_finish_time_end:"",q_order_belong:""}}},mixins:[l.default],components:{photoDetailModal:d.default,photoUploadModal:c.default},methods:{loadList:function(){var e=this,t=this.assignQuery(this.search);(0,i.orderBackListApi)(t).then(function(t){e.tableParams.list=t.resultObj.list,e.tableParams.total=t.resultObj.total,e.tableParams.selectList=[]})},openUploadModal:function(){o.$emit("open-upload-modal",this.tableParams.selectList)},orderReceipt:function(){var e=this,t={order_ids:this.tableParams.selectList.map(function(e){return e.order_id}).join(",")};this.$Modal.confirm({content:"确定收到回单？",onOk:function(){(0,i.orderBackReceiveApi)(t).then(function(t){e.loadList(),e.$Message.success(t.resultInfo)})}})},orderSend:function(){var e=this,t={order_ids:this.tableParams.selectList.map(function(e){return e.order_id}).join(",")};this.$Modal.confirm({content:"确定发出回单？",onOk:function(){(0,i.orderBackSendApi)(t).then(function(t){e.loadList(),e.$Message.success(t.resultInfo)})}})},openPhotoModal:function(e){o.$emit("open-photo-modal",e)}},computed:{orderUploadDisable:function(){return 1!=this.tableParams.selectList.length},orderReceiptDisable:function(){return!this.tableParams.selectList.length||this.tableParams.selectList.some(function(e){return e.back_state>1})},orderSendDisable:function(){return!this.tableParams.selectList.length||this.tableParams.selectList.some(function(e){return e.back_state>2})}},created:function(){this.loadList()},mounted:function(){var e=this;o.$on("receipt-list-reload",function(){e.loadList()})}}})}).call(t,i(227))},1286:function(e,t,i){var o,a,n;!function(s,r){a=[t,i(102),i(228),i(227)],o=r,void 0!==(n="function"==typeof o?o.apply(t,a):o)&&(e.exports=n)}(0,function(e,t,i,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(t),s=a(i),r=a(o);s.default.imgHost;e.default={name:"photoDetailModal",data:function(){return{modal:!1,activePhoto:"",order:{},photos:[]}},methods:{setActivePhoto:function(e){this.activePhoto=e}},watch:{photos:function(e,t){e&&(this.activePhoto=e[0])}},mounted:function(){var e=this;r.default.$on("open-photo-modal",function(t){e.order=t;var i=void 0,o=void 0;o=t.op_pics?t.op_pics.split(","):[],i=t.child_op_pics?t.child_op_pics.split(","):[],e.photos=[].concat((0,n.default)(o),(0,n.default)(i)),e.photos.length?e.modal=!0:e.$Message.info("该回单没有回单照片!")})}}})},1287:function(e,t,i){var o,a,n;!function(s,r){a=[t,i(228),i(485),i(227)],o=r,void 0!==(n="function"==typeof o?o.apply(t,a):o)&&(e.exports=n)}(0,function(e,t,i,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(t),s=a(o),r=n.default.imgHost;e.default={name:"photoUploadModal",data:function(){return{modal:!1,defaultList:[],uploadList:[],action:n.default.imgUploadUrl,order:{},viewImg:"",viewVisible:!1}},methods:{handleView:function(e){this.viewImg=e,this.viewVisible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function(e,t){t.url=r+e.resultObj,this.uploadList=this.$refs.upload.fileList},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+e.name+" 太大，不能超过 5M。"})},handleBeforeUpload:function(){var e=this.uploadList.length<5;return e||this.$Notice.warning({title:"最多只能上传 5 张图片。"}),e},uploadPhoto:function(){var e=this;if(!this.uploadList.length)return this.modal=!0,this.$refs.uploadModal.visible=!0,void this.$Message.warning("请添加图片！");var t=this,o={order_id:this.order.order_id,op_content:"",op_pics:this.uploadList.map(function(e){return e.url}).join(",")};(0,i.orderBackUploadApi)(o).then(function(e){t.$Message.success(e.resultObj),s.default.$emit("receipt-list-reload")}).catch(function(){e.modal=!0,e.$refs.uploadModal.visible=!0})}},watch:{modal:function(e,t){var i=this;e&&(this.defaultList=this.order.op_pics?this.order.op_pics.split(",").map(function(e){return{url:e,status:"finished",showProgress:!1,name:e}}):[],this.$nextTick(function(){i.uploadList=i.$refs.upload.fileList}))}},created:function(){},mounted:function(){var e=this;s.default.$on("open-upload-modal",function(t){e.order=t[0],e.modal=!0})}}})},1400:function(e,t,i){t=e.exports=i(1083)(),t.push([e.i,".demo-upload-list[data-v-3b9a34e7]{display:inline-block;width:60px;height:60px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.demo-upload-list img[data-v-3b9a34e7]{width:100%;height:100%}.demo-upload-list-cover[data-v-3b9a34e7]{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.demo-upload-list:hover .demo-upload-list-cover[data-v-3b9a34e7]{display:block}.demo-upload-list-cover i[data-v-3b9a34e7]{color:#fff;font-size:20px;cursor:pointer;margin:0 2px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/receipt/v1/photo-upload-modal.vue"],names:[],mappings:"AACA,mCACE,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,iBAAkB,AAClB,6BAA8B,AAC9B,kBAAmB,AACnB,gBAAiB,AACjB,gBAAiB,AACjB,kBAAmB,AACnB,oCAAyC,AACzC,gBAAkB,CACnB,AACD,uCACE,WAAY,AACZ,WAAa,CACd,AACD,yCACE,aAAc,AACd,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,OAAQ,AACR,QAAS,AACT,yBAA+B,CAChC,AACD,iEACE,aAAe,CAChB,AACD,2CACE,WAAY,AACZ,eAAgB,AAChB,eAAgB,AAChB,YAAc,CACf",file:"photo-upload-modal.vue",sourcesContent:["\n.demo-upload-list[data-v-3b9a34e7] {\n  display: inline-block;\n  width: 60px;\n  height: 60px;\n  text-align: center;\n  line-height: 60px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  overflow: hidden;\n  background: #fff;\n  position: relative;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  margin-right: 4px;\n}\n.demo-upload-list img[data-v-3b9a34e7] {\n  width: 100%;\n  height: 100%;\n}\n.demo-upload-list-cover[data-v-3b9a34e7] {\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover[data-v-3b9a34e7] {\n  display: block;\n}\n.demo-upload-list-cover i[data-v-3b9a34e7] {\n  color: #fff;\n  font-size: 20px;\n  cursor: pointer;\n  margin: 0 2px;\n}\n"],sourceRoot:""}])},1410:function(e,t,i){t=e.exports=i(1083)(),t.push([e.i,"#picModal img[data-v-4cf39b37]{width:100%}.pic-modal-row[data-v-4cf39b37]{height:400px}.pic-modal-row .ivu-col[data-v-4cf39b37]{height:100%;overflow-x:hidden;overflow-y:auto}.pic-modal-row .ivu-col.ivu-col-offset-1 img[data-v-4cf39b37]{margin-bottom:5px}.pic-modal-header[data-v-4cf39b37]{line-height:1.6;font-size:13px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/receipt/v1/photo-detail-modal.vue"],names:[],mappings:"AACA,+BACE,UAAY,CACb,AACD,gCACE,YAAc,CACf,AACD,yCACI,YAAa,AACb,kBAAmB,AACnB,eAAiB,CACpB,AACD,8DACM,iBAAmB,CACxB,AACD,mCACE,gBAAiB,AACjB,cAAgB,CACjB",file:"photo-detail-modal.vue",sourcesContent:["\n#picModal img[data-v-4cf39b37] {\n  width: 100%;\n}\n.pic-modal-row[data-v-4cf39b37] {\n  height: 400px;\n}\n.pic-modal-row .ivu-col[data-v-4cf39b37] {\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n.pic-modal-row .ivu-col.ivu-col-offset-1 img[data-v-4cf39b37] {\n      margin-bottom: 5px;\n}\n.pic-modal-header[data-v-4cf39b37] {\n  line-height: 1.6;\n  font-size: 13px;\n}\n"],sourceRoot:""}])},1488:function(e,t,i){var o=i(1400);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(1084)("c9113bfe",o,!0)},1498:function(e,t,i){var o=i(1410);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(1084)("806479dc",o,!0)},1583:function(e,t,i){i(1498);var o=i(10)(i(1286),i(1665),"data-v-4cf39b37",null);e.exports=o.exports},1584:function(e,t,i){i(1488);var o=i(10)(i(1287),i(1653),"data-v-3b9a34e7",null);e.exports=o.exports},1633:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"contain-head"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasSelect,expression:"!hasSelect"}]},[i("search-filter",{attrs:{list:e.conditionList},on:{"on-change":e.onSearch},model:{value:e.search.q_back_state,callback:function(t){e.$set(e.search,"q_back_state",t)},expression:"search.q_back_state"}}),e._v(" "),i("search-filter",{staticClass:"ml10",attrs:{list:e.conditionList2},on:{"on-change":e.onSearch},model:{value:e.search.q_order_belong,callback:function(t){e.$set(e.search,"q_order_belong",t)},expression:"search.q_order_belong"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSelect,expression:"hasSelect"}]},[i("i-button",{attrs:{type:"primary",disabled:e.orderUploadDisable},on:{click:e.openUploadModal}},[i("i",{staticClass:"wm-icon wm-icon-add"}),e._v("回单上传")]),e._v(" "),i("i-button",{attrs:{type:"primary",disabled:e.orderReceiptDisable},on:{click:e.orderReceipt}},[i("i",{staticClass:"wm-icon wm-icon-add"}),e._v("收到回单")]),e._v(" "),i("i-button",{attrs:{type:"primary",disabled:e.orderSendDisable},on:{click:e.orderSend}},[i("i",{staticClass:"wm-icon wm-icon-add"}),e._v("发出回单")])],1)]),e._v(" "),i("div",{staticClass:"contain-main"},[i("i-table",{attrs:{data:e.tableParams.list,columns:e.columns},on:{"on-selection-change":e.onSelectionChange}}),e._v(" "),i("div",{staticClass:"page-wrapper"},[i("Page",{attrs:{total:e.tableParams.total,"show-sizer":"","show-elevator":"",current:e.currentPage},on:{"on-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),e._v(" "),i("photo-detail-modal"),e._v(" "),i("photo-upload-modal")],1)},staticRenderFns:[]}},1653:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Modal",{ref:"uploadModal",attrs:{id:"uploadPicModal",title:"回单照片上传",width:"720"},on:{"on-ok":e.uploadPhoto},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[i("div",[e._l(e.uploadList,function(t){return i("div",{staticClass:"demo-upload-list"},["finished"===t.status?[i("img",{attrs:{src:t.url}}),e._v(" "),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){e.handleView(t.url)}}}),e._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){e.handleRemove(t)}}})],1)]:[t.showProgress?i("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":5120,multiple:"",type:"drag",action:e.action,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"camera",size:"20"}})],1)])],2),e._v(" "),i("h5",[e._v("提示：")]),e._v(" "),i("ol",[i("li",[e._v("1.本地上传图片大小不能超过2M")]),e._v(" "),i("li",[e._v("2.回单最多您可以传5张图片")])])]),e._v(" "),i("Modal",{attrs:{title:"查看图片"},model:{value:e.viewVisible,callback:function(t){e.viewVisible=t},expression:"viewVisible"}},[e.viewVisible?i("img",{staticStyle:{width:"100%"},attrs:{src:e.viewImg}}):e._e()])],1)},staticRenderFns:[]}},1665:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Modal",{attrs:{id:"picModal",width:"900"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[i("div",{staticClass:"pic-modal-header",attrs:{slot:"header"},slot:"header"},[i("div",[e._v("运单号："+e._s(e.order.order_no))]),e._v(" "),i("div",[e._v("货物："+e._s(e.order.c_amounts+"件 /")+" \n                      "+e._s(e.order.c_weights+"吨 /")+"\n                      "+e._s(e.order.c_volumes+"m3")+"  \n                托运方： "+e._s(e.order.send_company+"／")+"\n                        "+e._s(e.order.begin_link_man+"／")+"\n                        "+e._s(e.order.begin_link_mobile)+"\n                收货方：\n                        "+e._s(e.order.end_link_man+"／")+"\n                        "+e._s(e.order.end_link_mobile)+"\n            ")])]),e._v(" "),i("Row",{staticClass:"pic-modal-row"},[i("Col",{attrs:{span:"18"}},[i("img",{attrs:{src:e.activePhoto,alt:""}})]),e._v(" "),i("Col",{attrs:{span:"5",offset:"1"}},e._l(e.photos,function(t){return i("img",{key:t,attrs:{src:t,alt:""},on:{click:function(i){e.setActivePhoto(t)}}})}))],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=23.8323355630fa9c71deaf.js.map