webpackJsonp([48],{1112:function(e,t,a){a(1541);var o=a(10)(a(1296),a(1715),"data-v-eb7850d2",null);e.exports=o.exports},1147:function(e,t,a){var o,i,n;!function(a,s){i=[],o=s,void 0!==(n="function"==typeof o?o.apply(t,i):o)&&(e.exports=n)}(0,function(){"use strict"})},1296:function(e,t,a){var o,i,n;!function(s,r){i=[t,a(24),a(61),a(86),a(484),a(228),a(482),a(52),a(1147)],o=r,void 0!==(n="function"==typeof o?o.apply(t,i):o)&&(e.exports=n)}(0,function(e,t,a,o,i,n,s,r,l){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var d=p(t),m=p(a),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),u=p(n),f=p(s),_={company_name:[f.default.required({message:"公司名称不能为空"}),f.default.max({max:50,message:"公司名称不能超过50字符"})],short_cut:[f.default.required({message:"公司编号不能为空"})],company_address:[f.default.required({message:"公司地址不能为空"})],link_man:[f.default.required({message:"联系人不能为空"})],link_mobile:[f.default.required({message:"联系电话不能为空"})],link_id_no:[{validator:f.default.idCard,message:"请输入正确的身份证号",trigger:"blur"}],road_permit_no:[f.default.max({max:50,message:"长度不能超过50字符"})],road_permit_scope:[f.default.max({max:100,message:"message:"})],biz_permit_addr:[f.default.max({max:100,message:"message:"})],biz_permit_no:[f.default.max({max:50,message:"长度不能超过50字符"})]};e.default={name:"company",data:function(){return{defaultList:[],imgName:"",visible:!1,uploadList:[],action:u.default.imgUploadUrl,company:{company_name:"",short_cut:"",company_address:"",link_man:"",link_mobile:"",link_id_no:"",road_permit_no:"",road_permit_scope:"",biz_permit_addr:"",biz_permit_no:""},ruleValidate:_}},computed:(0,m.default)({},(0,o.mapState)(["userInfo"])),methods:{loadData:function(){var e=this,t={company_id:this.userInfo.company_id||""};c.getCompanyInfo(t).then(function(t){if(e.company=t.resultObj,!t.resultObj.company_logo_url)return void(e.uploadList=[]);var a=e.company.company_logo_url;e.uploadList=[{name:a,url:-1==a.indexOf(u.default.imgHost)?""+(u.default.imgHost+a):a,status:"finished"}]})},saveData:function(e){var t=this,a=(0,d.default)({},this.company),o=this.uploadList.length>0?this.uploadList[0].url:"";o=o.replace(u.default.imgHost,""),a.company_logo_url=o,this.$refs[e].validate(function(e){e&&c.saveCompanyInfo(a).then(function(e){t.$Message.success("保存成功!")})})},handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){this.uploadList=[];var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function(e,t){var a=t.response.resultObj;a.indexOf(u.default.imgHost)<0&&(a=u.default.imgHost+a),t.url=a,t.name=a;var o=this.$refs.upload.fileList.length;this.uploadList=[this.$refs.upload.fileList[o-1]]},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+e.name+" 太大，不能超过 2M。"})},handleBeforeUpload:function(){var e=this.uploadList.length<5;return e||this.$Notice.warning({title:"最多只能上传 5 张图片。"}),e}},created:function(){this.loadData()},mounted:function(){this.uploadList=this.$refs.upload.fileList}}})},1453:function(e,t,a){t=e.exports=a(1083)(),t.push([e.i,".demo-upload-list[data-v-eb7850d2]{display:inline-block;width:60px;height:60px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.demo-upload-list img[data-v-eb7850d2]{width:100%;height:100%}.demo-upload-list-cover[data-v-eb7850d2]{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.demo-upload-list:hover .demo-upload-list-cover[data-v-eb7850d2]{display:block}.demo-upload-list-cover i[data-v-eb7850d2]{color:#fff;font-size:20px;cursor:pointer;margin:0 2px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/system/v1/company.vue"],names:[],mappings:"AACA,mCACI,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,iBAAkB,AAClB,6BAA8B,AAC9B,kBAAmB,AACnB,gBAAiB,AACjB,gBAAiB,AACjB,kBAAmB,AACnB,oCAAqC,AACrC,gBAAkB,CACrB,AACD,uCACI,WAAY,AACZ,WAAa,CAChB,AACD,yCACI,aAAc,AACd,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,OAAQ,AACR,QAAS,AACT,yBAA2B,CAC9B,AACD,iEACI,aAAe,CAClB,AACD,2CACI,WAAY,AACZ,eAAgB,AAChB,eAAgB,AAChB,YAAc,CACjB",file:"company.vue",sourcesContent:["\n.demo-upload-list[data-v-eb7850d2]{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img[data-v-eb7850d2]{\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover[data-v-eb7850d2]{\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0,0,0,.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover[data-v-eb7850d2]{\n    display: block;\n}\n.demo-upload-list-cover i[data-v-eb7850d2]{\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n"],sourceRoot:""}])},1541:function(e,t,a){var o=a(1453);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(1084)("4cae56b8",o,!0)},1715:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"contain-main"},[a("Row",[a("Col",{attrs:{span:"16",offset:"2"}},[a("Form",{ref:"company",attrs:{model:e.company,rules:e.ruleValidate,"label-width":140}},[a("Form-item",{attrs:{label:"企业标志"}},[[e._l(e.uploadList,function(t){return a("div",{staticClass:"demo-upload-list"},["finished"===t.status?[a("img",{attrs:{src:t.url}}),e._v(" "),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){e.handleView(t.url)}}}),e._v(" "),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){e.handleRemove(t)}}})],1)]:[t.showProgress?a("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),a("Upload",{directives:[{name:"show",rawName:"v-show",value:0==e.uploadList.length,expression:"uploadList.length==0"}],ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:e.action}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"camera",size:"20"}})],1)]),e._v(" "),a("Modal",{attrs:{title:"查看图片"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.imgName}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])]],2),e._v(" "),a("Form-item",{attrs:{label:"公司名称",prop:"company_name"}},[a("i-input",{model:{value:e.company.company_name,callback:function(t){e.$set(e.company,"company_name",t)},expression:"company.company_name"}})],1),e._v(" "),a("Form-item",{attrs:{label:"公司编号",prop:"short_cut"}},[a("i-input",{attrs:{readonly:"readonly"},model:{value:e.company.short_cut,callback:function(t){e.$set(e.company,"short_cut",t)},expression:"company.short_cut"}})],1),e._v(" "),a("Form-item",{attrs:{label:"公司地址",prop:"company_address"}},[a("i-input",{attrs:{type:"textarea"},model:{value:e.company.company_address,callback:function(t){e.$set(e.company,"company_address",t)},expression:"company.company_address"}})],1),e._v(" "),a("Form-item",{attrs:{label:"联系人",prop:"link_man"}},[a("i-input",{model:{value:e.company.link_man,callback:function(t){e.$set(e.company,"link_man",t)},expression:"company.link_man"}})],1),e._v(" "),a("Form-item",{attrs:{label:"联系电话",prop:"link_mobile"}},[a("i-input",{model:{value:e.company.link_mobile,callback:function(t){e.$set(e.company,"link_mobile",t)},expression:"company.link_mobile"}})],1),e._v(" "),a("Form-item",{attrs:{label:"身份证号",prop:"link_id_no"}},[a("i-input",{model:{value:e.company.link_id_no,callback:function(t){e.$set(e.company,"link_id_no","string"==typeof t?t.trim():t)},expression:"company.link_id_no"}})],1),e._v(" "),a("Form-item",{attrs:{label:"统一社会信用代码",prop:"biz_permit_no"}},[a("i-input",{model:{value:e.company.biz_permit_no,callback:function(t){e.$set(e.company,"biz_permit_no",t)},expression:"company.biz_permit_no"}})],1),e._v(" "),a("Form-item",{attrs:{label:"企业注册地址",prop:"biz_permit_addr"}},[a("i-input",{attrs:{type:"textarea"},model:{value:e.company.biz_permit_addr,callback:function(t){e.$set(e.company,"biz_permit_addr",t)},expression:"company.biz_permit_addr"}})],1),e._v(" "),a("Form-item",{attrs:{label:"道路运输经营许可证",prop:"road_permit_no"}},[a("i-input",{model:{value:e.company.road_permit_no,callback:function(t){e.$set(e.company,"road_permit_no",t)},expression:"company.road_permit_no"}})],1),e._v(" "),a("Form-item",{attrs:{label:"经营范围",prop:"road_permit_scope"}},[a("i-input",{model:{value:e.company.road_permit_scope,callback:function(t){e.$set(e.company,"road_permit_scope",t)},expression:"company.road_permit_scope"}})],1),e._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.saveData("company")}}},[e._v("保存")])],1)],1)],1)],1)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=48.55b08b5dac73ea3a4ac1.js.map