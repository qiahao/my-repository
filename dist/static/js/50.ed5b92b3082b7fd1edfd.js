webpackJsonp([50],{1126:function(e,t,a){var i=a(10)(a(1314),a(1699),null,null);e.exports=i.exports},1137:function(e,t,a){var i,s,n;!function(r,c){s=[t,a(61),a(150)],i=c,void 0!==(n="function"==typeof i?i.apply(t,s):i)&&(e.exports=n)}(0,function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(t),n=i(a),r={data:function(){return{tableParams:{list:[],selectList:[],page:1,pageSize:10,total:0,isCheckBoxClick:!1}}},watch:{},computed:{hasSelect:function(){return!!this.tableParams.selectList.length},tableSelectLength:function(){return this.tableParams.selectList.length},currentPage:function(){return this.tableParams.page},selectedIds:function(){var e=this;return this.tableParams.selectList.map(function(t){return t[e.pk]})}},methods:{loadList:function(){this.$Message.info("请在页面实例重写loadList")},onSearch:function(){this.tableParams.page=1,this.tableParams.selectList=[],this.loadList()},onReset:function(){this.$refs.searchForm&&(this.$refs.searchForm.resetFields(),this.onRangeChange&&"function"==typeof this.onRangeChange&&(this.rangeTime=[],this.onRangeChange([])))},onSelectionChange:function(e){this.tableParams.selectList=(0,n.default)(e),this.tableParams.isCheckBoxClick=!0},onPageChange:function(e){this.tableParams.page=e,this.tableParams.selectList=[],this.loadList()},onPageSizeChange:function(e){this.tableParams.pageSize=e,this.onSearch()},assignQuery:function(e){return(0,s.default)({page:this.tableParams.page,page_size:this.tableParams.pageSize},e)}}};e.default=r})},1314:function(e,t,a){var i,s,n;!function(r,c){s=[t,a(61),a(86),a(1137),a(1360)],i=c,void 0!==(n="function"==typeof i?i.apply(t,s):i)&&(e.exports=n)}(0,function(e,t,a,i,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(t),c=n(i),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s);e.default={name:"vehicle",data:function(){return{columns:l.getColums.call(this),search:(0,r.default)({},l.searchParams)}},mixins:[c.default],methods:{loadList:function(){var e=this,t=this.assignQuery(this.search);this.$api.vehicleApi.apiListVehicle(t).then(function(t){e.tableParams.list=t.resultObj.list,e.tableParams.total=t.resultObj.total,e.tableParams.selectList=[]})},derecteToDetai:function(e){this.$router.push({name:"vehicleDetail",params:{id:e}})},deleteVehicle:function(){var e=this,t=void 0,a=this.tableSelectLength,i=this.tableParams.list.length;if(!a)return this.$Message.warning("请选择要操作的数据！");t={driver_ids:this.tableParams.selectList.map(function(e){return e.driver_id}).join(",")},this.$Modal.confirm({content:"<h4>确认要删除选中的车辆？</h4>",onOk:function(){e.$api.vehicleApi.apiDelVehicle(t).then(function(t){e.$Message.success("删除成功"),i<=a&&e.tableParams.page>1&&--e.tableParams.page,e.loadList()})}})},addVehicle:function(){this.$router.push({name:"vehicleAdd"})},onReset:function(){this.search=(0,r.default)({},l.searchParams),this.onSearch()}},computed:(0,r.default)({},(0,a.mapState)(["userInfo"])),created:function(){this.loadList()},mounted:function(){var e=this;this.$on("vehicle-list-reload",function(){e.loadList()})}}})},1360:function(e,t,a){var i,s,n;!function(a,r){s=[t],i=r,void 0!==(n="function"==typeof i?i.apply(t,s):i)&&(e.exports=n)}(0,function(e){"use strict";function t(){var e=this;return[{type:"selection",width:60,align:"center"},{title:"姓名",key:"driver_name",width:160,render:function(t,a){return t("a",{on:{click:function(){return e.derecteToDetai(a.row.driver_id)}}},a.row.driver_name)}},{title:"联系电话",key:"driver_mobile",width:150},{title:"车牌号",key:"truck_plate",width:100},{title:"类型",key:"truck_catagory"},{title:"车型",key:"truck_type"},{title:"车长",key:"truck_length"},{title:"吨位",key:"truck_weight"},{title:"容积",key:"truck_cube"},{title:"承运次数",key:"accept_count"}]}Object.defineProperty(e,"__esModule",{value:!0}),e.getColums=t;e.searchParams={driver_name:"",driver_mobile:"",truck_plate:""}})},1699:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"contain-head"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasSelect,expression:"!hasSelect"}],staticClass:"dib"},[a("i-input",{staticClass:"w180",attrs:{placeholder:"请输入司机姓名"},model:{value:e.search.driver_name,callback:function(t){e.$set(e.search,"driver_name",t)},expression:"search.driver_name"}}),e._v(" "),a("i-input",{staticClass:"w180",attrs:{placeholder:"请输入司机联系号码"},model:{value:e.search.driver_mobile,callback:function(t){e.$set(e.search,"driver_mobile",t)},expression:"search.driver_mobile"}}),e._v(" "),a("i-input",{staticClass:"w180",attrs:{placeholder:"请输入车牌号"},model:{value:e.search.truck_plate,callback:function(t){e.$set(e.search,"truck_plate",t)},expression:"search.truck_plate"}}),e._v(" "),a("i-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:e.onReset}},[e._v("重置")])],1),e._v(" "),a("i-button",{attrs:{type:"primary"},on:{click:e.addVehicle}},[e._v("新增")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSelect,expression:"hasSelect"}],staticClass:"dib"},[a("i-button",{attrs:{type:"warning"},on:{click:e.deleteVehicle}},[e._v("删除")])],1)],1),e._v(" "),a("div",{staticClass:"contain-main"},[a("i-table",{attrs:{data:e.tableParams.list,columns:e.columns,stripe:""},on:{"on-selection-change":e.onSelectionChange}}),e._v(" "),a("div",{staticClass:"page-wrapper"},[a("Page",{attrs:{total:e.tableParams.total,"show-sizer":"","show-elevator":"",current:e.currentPage},on:{"on-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),e._v(" "),a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=50.ed5b92b3082b7fd1edfd.js.map