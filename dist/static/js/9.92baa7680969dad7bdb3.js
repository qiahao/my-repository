webpackJsonp([9],{1103:function(t,e,a){a(1543);var i=a(10)(a(1280),a(1717),"data-v-f4edbfc8",null);t.exports=i.exports},1137:function(t,e,a){var i,s,r;!function(n,o){s=[e,a(61),a(150)],i=o,void 0!==(r="function"==typeof i?i.apply(e,s):i)&&(t.exports=r)}(0,function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(e),r=i(a),n={data:function(){return{tableParams:{list:[],selectList:[],page:1,pageSize:10,total:0,isCheckBoxClick:!1}}},watch:{},computed:{hasSelect:function(){return!!this.tableParams.selectList.length},tableSelectLength:function(){return this.tableParams.selectList.length},currentPage:function(){return this.tableParams.page},selectedIds:function(){var t=this;return this.tableParams.selectList.map(function(e){return e[t.pk]})}},methods:{loadList:function(){this.$Message.info("请在页面实例重写loadList")},onSearch:function(){this.tableParams.page=1,this.tableParams.selectList=[],this.loadList()},onReset:function(){this.$refs.searchForm&&(this.$refs.searchForm.resetFields(),this.onRangeChange&&"function"==typeof this.onRangeChange&&(this.rangeTime=[],this.onRangeChange([])))},onSelectionChange:function(t){this.tableParams.selectList=(0,r.default)(t),this.tableParams.isCheckBoxClick=!0},onPageChange:function(t){this.tableParams.page=t,this.tableParams.selectList=[],this.loadList()},onPageSizeChange:function(t){this.tableParams.pageSize=t,this.onSearch()},assignQuery:function(t){return(0,s.default)({page:this.tableParams.page,page_size:this.tableParams.pageSize},t)}}};t.default=n})},1152:function(t,e,a){var i,s,r;!function(a,n){s=[e],i=n,void 0!==(r="function"==typeof i?i.apply(e,s):i)&&(t.exports=r)}(0,function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e={data:function(){return{slideModal:!1}},methods:{loadDetail:function(){this.$Message.info("请重写loadDetail方法,加载详情")},openSlideModal:function(){this.loadDetail(),this.slideModal=!0},changeSlideModal:function(){var t=this;this.slideModal=!1,setTimeout(function(){t.$nextTick(function(){t.openSlideModal()})},300)},closeSlideModal:function(){this.slideModal=!1}}};t.default=e})},1190:function(t,e,a){var i,s,r;!function(n,o){s=[e,a(153),a(487)],i=o,void 0!==(r="function"==typeof i?i.apply(e,s):i)&&(t.exports=r)}(0,function(t,e,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(e),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a);t.default={props:{list:"",value:""},data:function(){return{truck:{truck_length:"",truck_type:""},truckList:[],modelValue:!1,truckLength:[],truckType:[]}},created:function(){this.loadDicts()},watch:{value:function(){this.modelValue=this.value},modelValue:function(){this.$emit("input",this.modelValue)},list:{handler:function(t,e){this.truckList=this.list},deep:!0}},methods:{loadDicts:function(){var t=this;s.dictTruckLengthApi().then(function(e){1==e.result?t.truckLength=e.resultObj:t.$Message.error(e.resultInfo)}),s.dictTruckTypeApi().then(function(e){1==e.result?t.truckType=e.resultObj:t.$Message.error(e.resultInfo)})},submit:function(){this.$emit("getList",this.truckList),this.modelValue=!1},addSection:function(){if(""==this.truck.truck_length)return this.$Message.error("请选择车长");if(""==this.truck.truck_type)return this.$Message.error("请选择长型");var t=this.truck.truck_length+"_"+this.truck.truck_type,e=this.truck.truck_length+"米 "+this.truck.truck_type;this.truckList.push((0,i.default)({key:t,name:e,val:""},"val",""))},removeSection:function(t){this.truckList=this.truckList.slice(0,t).concat(this.truckList.slice(t+1,this.truckList.length))}}}})},1202:function(t,e,a){e=t.exports=a(1083)(),e.push([t.i,".section-list li{border:1px solid #eee;padding:0 10px;border-radius:5px;display:inline-block;margin-right:10px;height:32px;line-height:28px;margin-bottom:10px;font-size:14px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/price/v2/vehicleModel.vue"],names:[],mappings:"AACA,iBACI,sBAAsB,AACtB,eAAe,AACf,kBAAkB,AAClB,qBAAqB,AACrB,kBAAkB,AAClB,YAAY,AACZ,iBAAiB,AACjB,mBAAmB,AACnB,cAAc,CACjB",file:"vehicleModel.vue",sourcesContent:["\n.section-list li{\n    border:1px solid #eee;\n    padding:0 10px;\n    border-radius:5px;\n    display:inline-block;\n    margin-right:10px;\n    height:32px;\n    line-height:28px;\n    margin-bottom:10px;\n    font-size:14px\n}\n"],sourceRoot:""}])},1207:function(t,e,a){var i=a(1202);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1084)("46146ee1",i,!0)},1212:function(t,e,a){a(1207);var i=a(10)(a(1190),a(1222),null,null);t.exports=i.exports},1222:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{width:"520",title:"车辆管理"},model:{value:t.modelValue,callback:function(e){t.modelValue=e},expression:"modelValue"}},[a("div",[a("label",{staticClass:"ml20 mr5"},[t._v("车长")]),a("i-select",{staticStyle:{width:"120px"},model:{value:t.truck.truck_length,callback:function(e){t.$set(t.truck,"truck_length",e)},expression:"truck.truck_length"}},t._l(t.truckLength,function(e){return a("i-option",{key:e,attrs:{value:e.dict_value}},[t._v(t._s(e.dict_text))])})),t._v(" "),a("label",{staticClass:"ml20 mr5"},[t._v("车型")]),a("i-select",{staticStyle:{width:"130px"},model:{value:t.truck.truck_type,callback:function(e){t.$set(t.truck,"truck_type",e)},expression:"truck.truck_type"}},t._l(t.truckType,function(e){return a("i-option",{key:e,attrs:{value:e.dict_value}},[t._v(t._s(e.dict_text))])})),t._v(" "),a("i-button",{staticClass:"ml20",attrs:{type:"primary"},on:{click:t.addSection}},[t._v("增加")])],1),t._v(" "),a("div",{staticClass:"mt20 ml20"},[a("ul",{staticClass:"clearfix section-list"},t._l(t.truckList,function(e,i){return a("li",[a("span",[t._v(t._s(e.key))]),a("span",{on:{click:function(e){t.removeSection(i)}}},[a("Icon",{staticClass:"ml5",attrs:{type:"close-circled"}})],1)])}))]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary",size:"large"},on:{click:t.submit}},[t._v("确定")])],1)])},staticRenderFns:[]}},1280:function(t,e,a){(function(i){var s,r,n;!function(i,o){r=[e,a(69),a(24),a(61),a(153),a(491),a(488),a(1581),a(1580),a(86),a(1152),a(482),a(52)],s=o,void 0!==(n="function"==typeof s?s.apply(e,r):s)&&(t.exports=n)}(0,function(t,e,a,s,r,n,o,l,c,u,d,p,m){"use strict";function _(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});var f=_(e),h=_(a),v=_(s),b=_(r),g=_(l),A=_(c),k=_(d);_(p);t.default={name:"projectDetail",data:function(){var t;return{user:"",operateType:"add",curid:"",ruleObj:(t={prj_name:[{required:!0,message:"这是必填项"}],partner_id:[{required:!0,message:"这是必填项"}],dateRange:[{required:!0,message:"这是必填项"}],contract_no:[{required:!0,message:"这是必填项"}],prj_manager_id:[{required:!0,message:"这是必填项"}],prj_officer_id:[{required:!0,message:"这是必填项"}],prj_cussrv_id:[{required:!0,message:"这是必填项"}]},(0,b.default)(t,"partner_id",[{required:!0,message:"这是必填项",trigger:"change"}]),(0,b.default)(t,"partner_link_mobile",[{required:!0,message:"这是必填项"},{pattern:/^1[34578]\d{9}$/,message:"正确输入号码格式"}]),(0,b.default)(t,"prj_rate",[{required:!0,message:"这是必填项"},{pattern:/^\d{1,2}(\.\d{1,2})?$/,message:"小于100，小数点不能超过两位"}]),t),routeColumns:[{title:"始发地城市",key:"from_city",width:410},{title:"目的地城市",key:"to_city",width:410}],mainData:{act_user_id:"",prj_name:"",partner_id:"",back_order_type:"NO",back_order_nums:"",back_type_other:"",pm_id:"",pm_pub:"",pm_name:"",prj_self:"Y",effect_time_begin:"",effect_time_end:"",prj_id:"",prj_recommend:"",dateRange:"",prj_rate:"",prj_advance:!1},search:{page:1,page_size:9999,is_del:"N",is_account:"N"},prj_id:"",partner_ids:"",partnerList:[],userList:[],routeList:[],slideModal:!1,priceModel:!1,isEditAble:!1,routeCount:0}},created:function(){},activated:function(){this.watchRouteIdHandler(this.$route.query.id)},components:{routeAssign:A.default,routeList:g.default},mounted:function(){var t=this;this.mainData.act_user_id=this.userInfo.user_id,this.search.act_user_id=this.userInfo.user_id,this.watchRouteIdHandler(this.$route.query.id),i.$on("route-total-compute",function(e){t.routeCount=e})},mixins:[k.default],computed:(0,v.default)({},(0,u.mapState)(["userInfo"]),{priceStatus:function(){return"1"==this.mainData.pm_state?"生效":"2"==this.mainData.pm_state?"无效":"3"==this.mainData.pm_state?"已过期":"0"==this.mainData.pm_state?"未生效":void 0}}),methods:{watchRouteIdHandler:function(t){this.loadUserList(),this.loadPartnerList(),this.$refs.mainData.resetFields(),t?(this.isEditAble=!1,this.prj_id=t,this.operateType="detail",this.loadDetail(t)):(this.operateType="add",this.routeList=[],this.isEditAble=!0)},loadDetail:function(t){var e=this,a=this;this.$api.projectApi.projectDetail({prj_id:t,act_user_id:a.userInfo.user_id}).then(function(t){e.mainData=(0,h.default)({},t.resultObj),e.mainData.dateRange=[e.mainData.effect_time_begin,e.mainData.effect_time_end],e.mainData.prj_advance="Y"==t.resultObj.prj_advance})},loadPartnerList:function(){var t=this,e=(0,h.default)({},this.search);(0,n.getPartnerList)(e).then(function(e){t.partnerList=e.resultObj.list})},loadUserList:function(){var t=this,e=(0,h.default)({},this.search);e.company_id=this.userInfo.company_id,this.$api.projectApi.projectUserlist(e).then(function(e){t.userList=e.resultObj.list})},saveProject:function(){var t=this,e=this,a=(0,h.default)({},this.mainData);e.$refs.mainData.validate(function(i){if(i){if("Y"==e.mainData.prj_self&&parseFloat(e.mainData.prj_rate)<3)return e.$Message.error("自营项目服务费不能小于3%");if("N"==e.mainData.prj_self&&parseFloat(e.mainData.prj_rate)<1)return e.$Message.error("非自营项目服务费不能小于1%");var s=e.dateRangeFormate(t.mainData.dateRange);a.effect_time_begin=s[0],a.effect_time_end=s[1],a.prj_advance=a.prj_advance?"Y":"N","detail"==e.operateType?t.$api.projectApi.projectUpdate(a).then(function(a){e.$Message.success("修改成功"),e.isEditAble=!1,t.routeBack()}):t.$api.projectApi.projectCreate(a).then(function(a){e.$Message.success("新增成功"),t.routeBack()})}})},edit:function(){this.isEditAble=!0},cancelEdit:function(){var t=this;this.$Modal.confirm({title:"确认提示",content:"是否确认取消编缉？",onOk:function(){t.isEditAble=!1,t.loadDetail(t.prj_id)}})},public:function(){var t=this;if(0==t.routeCount)return t.$Message.error("该项目未导入价格表，不可发布");this.$Modal.confirm({title:"确认提示",content:"是否确认发布？",onOk:function(){t.mainData.pm_pub="1",t.saveProject()}})},del:function(){var t=this;this.$Modal.confirm({title:"确认提示",content:"是否确认删除？",onOk:function(){t.mainData.is_del="Y",t.saveProject()}})},cancel:function(){var t=this;this.$Modal.confirm({title:"确认提示",content:"是否确认作废？",onOk:function(){t.mainData.pm_pub="2",t.saveProject()}})},recovery:function(){var t=this;this.$Modal.confirm({title:"确认提示",content:"是否确认恢复？",onOk:function(){t.mainData.pm_pub="1",t.saveProject()}})},routeBack:function(){this.$router.go(-1)},dateRangeFormate:function(t){if("string"==typeof t[0])return t;if("object"==(0,f.default)(t[0])){return[(0,m.getDateFormat)(t[0]).substring(0,10),(0,m.getDateFormat)(t[1]).substring(0,10)]}}}}})}).call(e,a(227))},1282:function(t,e,a){var i,s,r;!function(n,o){s=[e,a(61),a(1137),a(489),a(492),a(86),a(52)],i=o,void 0!==(r="function"==typeof i?i.apply(e,s):i)&&(t.exports=r)}(0,function(t,e,a,i,s,r,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});var l=o(e),c=o(a);t.default={props:{},data:function(){return{columns:[{type:"selection",width:90,align:"center"},{title:"始发地城市",key:"from_city"},{title:"目的地城市",key:"to_city"},{title:"承运商",key:"liner_name"}],projectDetail:!1,search:{act_user_id:"",order_by:"",is_contract:"1"},liner_id:"",project_id:"",showDetailModal:!1,routeReadyList:[],routeAlreadyList:[],routeLinerList:[],routeAssignModel:!1,linerData:{list:[]}}},mixins:[c.default],computed:(0,l.default)({},(0,r.mapState)(["userInfo"])),created:function(){},activated:function(){this.project_id=this.$route.query.id,this.project_id&&this.onSearch()},mounted:function(){this.project_id=this.$route.query.id,this.onSearch()},methods:{loadList:function(){this.onSearch()},onSearch:function(){var t=this;t.search.act_user_id=t.userInfo.user_id,t.search.prj_id=t.project_id,t.search.page_size=999;var e=this.assignQuery(t.search);"1"===e.is_contract&&(e.is_contract=""),(0,i.projectTractList)(e).then(function(e){t.routeReadyList=e.resultObj.list,t.tableParams.total=e.resultObj.total,t.tableParams.selectList=[]})},onSelectionChange:function(t){this.tableParams.selectList=t},add:function(){var t=this;if(0==t.tableParams.selectList.length)return this.$Message.error("请选择一条数据");var e=[];e=this.tableParams.selectList.filter(function(t){return"Y"==t.is_contract}),0==e.length?t.routeAssignModel=!0:this.$Modal.confirm({title:"确认提示",content:"您选择的部分线路已被承运，是否替换？",onOk:function(){t.routeAssignModel=!0}}),t.loadLinerList()},loadLinerList:function(){var t=this,e={act_user_id:this.userInfo.user_id,page:1,page_size:999,is_account:"Y",account_status:"Y"};(0,s.getLinerList)(e).then(function(e){t.linerData.list=e.resultObj.list,t.linerData.total=e.resultObj.total})},partnerBlur:function(t){this.linerId=t.route_id},cancel:function(t){var e=this;if(0==e.tableParams.selectList.length)return this.$Message.error("请选择一条数据");var a={act_user_id:e.userInfo.user_id,prj_id:this.project_id,liner_id:"",route_ids:(0,n.getArrayIds)(this.tableParams.selectList,"route_id")};this.$Modal.confirm({title:"确认提示",content:"是否确认取消分包？",onOk:function(){(0,i.projectTractCreate)(a).then(function(t){e.onSearch(),e.$Message.success("操作成功！")})}})},submit:function(){var t=this;if(""==this.liner_id)return this.$Message.error("请选择承运商");var e={act_user_id:this.userInfo.user_id,prj_id:this.project_id,route_ids:(0,n.getArrayIds)(this.tableParams.selectList,"route_id"),liner_id:this.liner_id};(0,i.projectTractCreate)(e).then(function(){t.onSearch(),t.routeAssignModel=!1})},cancelModel:function(){this.routeAssignModel=!1}}}})},1283:function(t,e,a){(function(i){var s,r,n;!function(i,o){r=[e,a(24),a(61),a(1212),a(1137),a(489),a(52),a(86),a(228)],s=o,void 0!==(n="function"==typeof s?s.apply(e,r):s)&&(t.exports=n)}(0,function(t,e,a,s,r,n,o,l,c){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});var d=u(e),p=u(a),m=(u(s),u(r));u(c);t.default={props:{pm_pub:""},data:function(){return{excelUrl:"",mbModel:!1,uploadModel:!1,project_id:"",search:{order_by:"from",page_size:"999"},loadResultTab:!1,loadResultCount:"",columnData:[{title:"始发地",width:200,key:"from_city"}],host:"",columnsDefault:[{title:"始发地",width:200,key:"from_city"},{title:"目的地",width:200,key:"to_city"},{title:"截单时间",width:150,key:"cut_off_hour"},{title:"发车时间",key:"send_car_hour",width:150},{title:"运输时效 (天)",key:"trans_days",width:150},{title:"回单时间 (天)",key:"receipt_days",width:150},{title:"货款返还时间 (天)",key:"cash_days",width:150}]}},mixins:[m.default],computed:(0,p.default)({},(0,l.mapState)(["userInfo"])),created:function(){},watch:{project_id:function(t,e){t&&this.onSearch()}},activated:function(){this.project_id=this.$route.query.id,this.project_id&&this.onSearch()},mounted:function(){this.project_id=this.$route.query.id,this.host="",this.importPrice();var t=this;i.$on("list-reload",function(e){!1===e&&(t.showDetailModal=!1),t.onSearch()})},methods:{onSearch:function(){var t=this;t.search.act_user_id=t.userInfo.user_id,t.search.prj_id=t.project_id;var e=this.assignQuery(t.search);(0,n.projectRouteList)(e).then(function(e){if(e.resultObj.list.length>0){var a=JSON.parse(e.resultObj.list[0].route_price);t.setColums(a),t.tableParams.list=e.resultObj.list.map(function(e){return(0,d.default)(e,t.getColumsData(JSON.parse(e.route_price)))})}else t.tableParams.list=[];t.tableParams.total=e.resultObj.total,i.$emit("route-total-compute",t.tableParams.total)})},setColums:function(t){var e=this;e.columnData=e.columnsDefault.slice(),t.forEach(function(t){var a={title:t.name,key:t.key,width:140};e.columnData.push(a)})},getColumsData:function(t){var e={};return t.forEach(function(t){e[t.key]=t.val}),e},importPrice:function(){this.excelUrl=this.host+"/api/tms/project/route/member/excel/import?act_user_id="+this.userInfo.user_id+"&prj_id="+this.project_id},importRoute:function(){this.uploadModel=!0},successHandle:function(t,e){"1"!=t.result?this.$Message.error(t.resultInfo):(this.uploadModel=!1,this.onSearch(),this.showLoadResult(t.resultInfo))},beforeLoadHandle:function(t){var e=t.name.split("."),a=e[e.length-1];if("xlsx"!=a&&"xls"!=a)return this.$Message.error("请选择.xlsx或.xls后缀文件"),!1},cancelUpload:function(){this.uploadModel=!1},loadMb:function(){this.mbModel=!0},clearRoute:function(){var t=this,e={act_user_id:this.userInfo.user_id,prj_id:this.project_id};this.$Modal.confirm({title:"系统提示",content:"您确认清除价格表？",onOk:function(){(0,n.clearProjectRoute)(e).then(function(e){1==e.result&&(t.$Message.success("价格表已清空"),t.onSearch(),t.loadResultTab=!1,t.loadResultCount=0)})}})},exportRoute:function(){var t=this.host+"/api/tms/project/route/member/excel/export?act_user_id="+this.userInfo.user_id+"&prj_id="+this.project_id;window.open(t)},showLoadResult:function(t){this.loadResultTab=!0,this.loadResultCount=t},closeLoadResult:function(){this.loadResultTab=!1}}}})}).call(e,a(227))},1455:function(t,e,a){e=t.exports=a(1083)(),e.push([t.i,".state-status[data-v-f4edbfc8]{margin-right:10px;margin-top:7px;padding:0 10px;border-radius:10px;background:#169bd5;line-height:20px;font-size:12px;float:right;color:#fff}span.stategreen[data-v-f4edbfc8]{background:green;color:#fff}.statered[data-v-f4edbfc8]{background:red;color:#fff}.stategray[data-v-f4edbfc8]{background:#ccc;color:#000}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/project/v2/detail.vue"],names:[],mappings:"AACA,+BACI,kBAAkB,AAClB,eAAe,AACf,eAAe,AACf,mBAAmB,AACnB,mBAAiC,AACjC,iBAAkB,AAClB,eAAgB,AAChB,YAAa,AACb,UAAU,CACb,AACD,iCACI,iBAAiB,AACjB,UAAU,CACb,AACD,2BACI,eAAe,AACf,UAAU,CACb,AACD,4BACI,gBAAgB,AAChB,UAAU,CACb",file:"detail.vue",sourcesContent:["\n.state-status[data-v-f4edbfc8]{\n    margin-right:10px;\n    margin-top:7px;\n    padding:0 10px;\n    border-radius:10px;\n    background:rgba(22, 155, 213, 1);\n    line-height: 20px;\n    font-size: 12px;\n    float: right;\n    color:#fff\n}\nspan.stategreen[data-v-f4edbfc8]{\n    background:green; \n    color:#fff\n}\n.statered[data-v-f4edbfc8]{\n    background:red;\n    color:#fff\n}\n.stategray[data-v-f4edbfc8]{\n    background:#ccc;\n    color:#000\n}\n"],sourceRoot:""}])},1456:function(t,e,a){e=t.exports=a(1083)(),e.push([t.i,"ul.route-liner-list li{background:#f6f6f6;border:1px solid #ccc;border-radius:5px;padding:0 15px;height:32px;line-height:32px}","",{version:3,sources:["/Users/ganqiantai/Desktop/gitWork/wm/tms-web/src/components/project/v2/routeAssign.vue"],names:[],mappings:"AACA,uBACI,mBAAmB,AACnB,sBAAuB,AACvB,kBAAkB,AAClB,eAAe,AACf,YAAY,AACZ,gBAAiB,CACpB",file:"routeAssign.vue",sourcesContent:["\nul.route-liner-list li{\n    background:#f6f6f6;\n    border:1px  solid #ccc;\n    border-radius:5px;\n    padding:0 15px;\n    height:32px;\n    line-height:32px;\n}\n"],sourceRoot:""}])},1543:function(t,e,a){var i=a(1455);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1084)("553adf4f",i,!0)},1544:function(t,e,a){var i=a(1456);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1084)("17162cca",i,!0)},1580:function(t,e,a){a(1544);var i=a(10)(a(1282),a(1718),null,null);t.exports=i.exports},1581:function(t,e,a){var i=a(10)(a(1283),a(1705),null,null);t.exports=i.exports},1705:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt20"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadResultTab,expression:"loadResultTab"}],staticClass:"row-box mb10",staticStyle:{background:"#e9eaec"}},[a("Row",[a("i-col",{attrs:{span:"24"}},[a("span",{staticClass:"fl mt5 ml10"},[a("Icon",{attrs:{size:"22",color:"#19be6b",type:"ios-checkmark-outline"}})],1),t._v(" "),a("span",{staticClass:"fl mt5 ml10"},[t._v(t._s(t.loadResultCount)+"！")]),t._v(" "),a("span",{staticClass:"fr mt5 mr10",on:{click:t.closeLoadResult}},[a("Icon",{attrs:{type:"close"}})],1)])],1)],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("Row",[a("i-col",{attrs:{span:"24"}},[a("i-select",{directives:[{name:"show",rawName:"v-show",value:0!=t.tableParams.total,expression:"tableParams.total!=0"}],staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"请选择排序方式"},on:{"on-change":t.onSearch},model:{value:t.search.order_by,callback:function(e){t.$set(t.search,"order_by",e)},expression:"search.order_by"}},[a("i-option",{attrs:{value:"from"}},[t._v("按出发地排序")]),t._v(" "),a("i-option",{attrs:{value:"to"}},[t._v("按目的地排序")])],1),t._v(" "),a("i-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.tableParams.total&&0==t.pm_pub,expression:"tableParams.total!=0 &&  pm_pub == 0"}],attrs:{size:"small"},on:{click:t.clearRoute}},[t._v("清空价格表")]),t._v(" "),a("i-button",{directives:[{name:"show",rawName:"v-show",value:0==t.pm_pub,expression:"pm_pub == 0"}],attrs:{size:"small"},on:{click:t.importRoute}},[t._v("导入价格")]),t._v(" "),a("i-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.tableParams.total,expression:"tableParams.total!=0"}],attrs:{size:"small"},on:{click:t.exportRoute}},[t._v("导出价格")]),t._v(" "),a("i-button",{directives:[{name:"show",rawName:"v-show",value:0==t.pm_pub,expression:"pm_pub == 0"}],attrs:{size:"small"},on:{click:t.loadMb}},[t._v("下载价格模版")])],1)],1)],1),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:0==t.tableParams.total,expression:"tableParams.total==0"}],staticClass:"mt10"},[t._v("暂无价格表，您可以点击上方的“下载价格模板”下载价格模板文件，并点击上方的“导入价格”按钮导入您已编辑的价格表。")]),t._v(" "),a("i-table",{directives:[{name:"show",rawName:"v-show",value:0!=t.tableParams.total,expression:"tableParams.total!=0"}],staticClass:"mt10",attrs:{size:"small",data:t.tableParams.list,columns:t.columnData}}),t._v(" "),a("Modal",{attrs:{title:"模版下载",width:"420"},model:{value:t.mbModel,callback:function(e){t.mbModel=e},expression:"mbModel"}},[a("p",{staticClass:"mt10"},[t._v("您可以选择对应的模版进行填写：")]),t._v(" "),a("div",{staticClass:"mt10"},[a("a",{attrs:{href:t.host+"/api/utils/excel/route-price/demo?type=0"}},[t._v("整车报价模板")]),t._v(" "),a("a",{staticClass:"ml30",attrs:{href:t.host+"/api/utils/excel/route-price/demo?type=1"}},[t._v("零担报价模板")]),t._v(" "),a("a",{staticClass:"ml30",attrs:{href:t.host+"/api/utils/excel/route-price/demo?type=2"}},[t._v("零担分段报价模板")])])]),t._v(" "),a("Modal",{attrs:{title:"提示",width:"400","class-name":"vertical-center-modal"},model:{value:t.uploadModel,callback:function(e){t.uploadModel=e},expression:"uploadModel"}},[a("div",{staticClass:"insure-modal-content"},[a("p",[t._v("导入价格将刷新已有价格表，是否继续？")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{on:{click:t.cancelUpload}},[t._v("取消")]),t._v(" "),a("Upload",{staticStyle:{display:"inline-block"},attrs:{"on-success":t.successHandle,"before-upload":t.beforeLoadHandle,"show-upload-list":!1,action:t.excelUrl}},[a("i-button",{attrs:{type:"primary"}},[t._v("确定")])],1)],1)])],1)},staticRenderFns:[]}},1717:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"contain-head"},[a("div",[a("div",{staticClass:"clearfix",attrs:{slot:"head"},slot:"head"},[a("h3",{staticClass:"fl"},[a("i-button",{staticClass:"mr10",attrs:{size:"small"},on:{click:t.routeBack}},[t._v("<返回")]),t._v("\n                    "+t._s("add"==t.operateType?"新增项目":"项目详情")+"\n                ")],1),t._v(" "),a("span",{staticClass:"fr"},["2"!=t.mainData.pm_pub&&t.isEditAble?a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveProject}},[t._v("保存")]):t._e(),t._v(" "),"0"!=t.mainData.pm_pub||t.isEditAble?t._e():a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.public}},[t._v("发布")]),t._v(" "),"0"!=t.mainData.pm_pub||"detail"!=t.operateType||t.isEditAble?t._e():a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.edit}},[t._v("编缉")]),t._v(" "),"0"==t.mainData.pm_pub&&"detail"==t.operateType&&t.isEditAble?a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.cancelEdit}},[t._v("取消")]):t._e(),t._v(" "),"0"!=t.mainData.pm_pub||t.isEditAble?t._e():a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.del}},[t._v("删除")]),t._v(" "),"1"==t.mainData.pm_pub?a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.cancel}},[t._v("作废")]):t._e(),t._v(" "),"2"==t.mainData.pm_pub?a("i-button",{attrs:{size:"small",type:"primary"},on:{click:t.recovery}},[t._v("恢复")]):t._e()],1)])])]),t._v(" "),a("div",{staticClass:"contain-main"},[a("div",{attrs:{slot:"default"},slot:"default"},[a("Tabs",{attrs:{value:"customer-01"}},[a("Tab-pane",{staticStyle:{height:"500px"},attrs:{label:"基本信息",name:"customer-01"}},[a("div",[a("i-form",{ref:"mainData",attrs:{model:t.mainData,rules:t.ruleObj}},[a("div",{staticClass:"row-box mb10"},[a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"项目名称：",prop:"prj_name","label-width":110}},[a("i-input",{staticClass:"fl",staticStyle:{width:"300px"},attrs:{disabled:!t.isEditAble,placeholder:"请输入目名称"},model:{value:t.mainData.prj_name,callback:function(e){t.$set(t.mainData,"prj_name",e)},expression:"mainData.prj_name"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.operateType,expression:"operateType=='detail'"}],staticClass:"state-status",class:[{stategreen:"1"==t.mainData.pm_pub},{statered:"2"==t.mainData.pm_pub}]},[t._v(t._s(["草稿","已发布","已作废"][t.mainData.pm_pub]))])],1)],1),t._v(" "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"客户名称：",prop:"partner_id","label-width":110}},[a("i-select",{attrs:{disabled:!t.isEditAble,placeholder:"请选择客户"},model:{value:t.mainData.partner_id,callback:function(e){t.$set(t.mainData,"partner_id",e)},expression:"mainData.partner_id"}},[a("i-option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.partnerList,function(e){return a("i-option",{key:e,attrs:{value:e.pcid}},[t._v(t._s(e.partner_name))])})],2)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"row-box mb10"},[a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"项目类型：",prop:"prj_self","label-width":110}},[a("Radio-group",{staticClass:"ml5",model:{value:t.mainData.prj_self,callback:function(e){t.$set(t.mainData,"prj_self",e)},expression:"mainData.prj_self"}},[a("Radio",{attrs:{disabled:!t.isEditAble,label:"Y"}},[a("span",[t._v("自营")])]),t._v(" "),a("Radio",{attrs:{disabled:!t.isEditAble,label:"N"}},[a("span",[t._v("非自营")])])],1)],1)],1),t._v(" "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"项目推介商户：",prop:"prj_recommend","label-width":110}},[a("i-input",{attrs:{disabled:!t.isEditAble,placeholder:"项目推介商户"},model:{value:t.mainData.prj_recommend,callback:function(e){t.$set(t.mainData,"prj_recommend",e)},expression:"mainData.prj_recommend"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"row-box mb10"},[a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"有效期(起止)：",prop:"dateRange","label-width":110}},[a("DatePicker",{staticClass:"fl",staticStyle:{width:"330px"},attrs:{disabled:!t.isEditAble,format:"yyyy-MM-dd",type:"daterange",placement:"bottom-end",placeholder:"选择日期"},model:{value:t.mainData.dateRange,callback:function(e){t.$set(t.mainData,"dateRange",e)},expression:"mainData.dateRange"}}),t._v(" "),"1"==t.mainData.pm_pub?a("span",{staticClass:"state-status stategray",class:[{stategreen:"1"==t.mainData.pm_state}]},[t._v(t._s(t.priceStatus))]):t._e()],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"row-box mb10"},[a("Row",[a("i-col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"合同编号：",prop:"contract_no","label-width":110}},[a("i-input",{attrs:{disabled:!t.isEditAble,placeholder:"请输入合同编号"},model:{value:t.mainData.contract_no,callback:function(e){t.$set(t.mainData,"contract_no",e)},expression:"mainData.contract_no"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"项目经理：",prop:"prj_manager_id","label-width":110}},[a("i-select",{attrs:{disabled:!t.isEditAble,placeholder:"请选择项目经理"},model:{value:t.mainData.prj_manager_id,callback:function(e){t.$set(t.mainData,"prj_manager_id",e)},expression:"mainData.prj_manager_id"}},t._l(t.userList,function(e){return a("i-option",{key:e,attrs:{value:e.user_id}},[t._v(t._s(e.user_name))])}))],1)],1),t._v(" "),a("i-col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"合规专员：",prop:"prj_officer_id","label-width":110}},[a("i-select",{attrs:{disabled:!t.isEditAble,placeholder:"请选择合规专员"},model:{value:t.mainData.prj_officer_id,callback:function(e){t.$set(t.mainData,"prj_officer_id",e)},expression:"mainData.prj_officer_id"}},t._l(t.userList,function(e){return a("i-option",{key:e,attrs:{value:e.user_id}},[t._v(t._s(e.user_name))])}))],1)],1),t._v(" "),a("i-col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"客服专员：",prop:"prj_cussrv_id","label-width":110}},[a("i-select",{attrs:{disabled:!t.isEditAble,placeholder:"请选择客服专员"},model:{value:t.mainData.prj_cussrv_id,callback:function(e){t.$set(t.mainData,"prj_cussrv_id",e)},expression:"mainData.prj_cussrv_id"}},t._l(t.userList,function(e){return a("i-option",{key:e,attrs:{value:e.user_id}},[t._v(t._s(e.user_name))])}))],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"row-box mb10"},[a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"项目服务费：","label-width":110,prop:"prj_rate"}},[a("i-input",{staticStyle:{width:"60px","border-bottom":"1px solid #888"},attrs:{disabled:!t.isEditAble},model:{value:t.mainData.prj_rate,callback:function(e){t.$set(t.mainData,"prj_rate",e)},expression:"mainData.prj_rate"}}),t._v("%\n                                        ")],1)],1),t._v(" "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"",prop:"daterange","label-width":0}},[a("Checkbox",{staticClass:"ml20",attrs:{disabled:!t.isEditAble},model:{value:t.mainData.prj_advance,callback:function(e){t.$set(t.mainData,"prj_advance",e)},expression:"mainData.prj_advance"}},[t._v("垫付资金")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"row-box mb10"},[a("Row",[a("i-col",{attrs:{span:"24"}},[a("Form-item",{staticClass:"fl",attrs:{label:"回单：","label-width":110}},[a("Radio-group",{model:{value:t.mainData.back_order_type,callback:function(e){t.$set(t.mainData,"back_order_type",e)},expression:"mainData.back_order_type"}},[a("Radio",{attrs:{disabled:!t.isEditAble,label:"NO"}},[a("span",[t._v("无")])]),t._v(" "),a("Radio",{attrs:{disabled:!t.isEditAble,label:"0"}},[a("span",[t._v("回执")])]),t._v(" "),a("Radio",{attrs:{disabled:!t.isEditAble,label:"1"}},[a("span",[t._v("原单")])]),t._v(" "),a("Radio",{attrs:{disabled:!t.isEditAble,label:"2"}},[a("span",[t._v("收条")])]),t._v(" "),a("Radio",{attrs:{disabled:!t.isEditAble,label:"3"}},[a("span",[t._v("电子回单")])]),t._v(" "),a("Radio",{attrs:{disabled:!t.isEditAble,label:"4"}},[a("span",[t._v("其他")])])],1)],1),t._v(" "),a("i-input",{directives:[{name:"show",rawName:"v-show",value:"4"==t.mainData.back_order_type,expression:"mainData.back_order_type=='4'"}],staticClass:"fl",staticStyle:{width:"120px","text-align":"center；border-bottom:1px solid #ccc"},attrs:{disabled:!t.isEditAble,prop:"back_type_other",placeholder:"请输入其他"},model:{value:t.mainData.back_type_other,callback:function(e){t.$set(t.mainData,"back_type_other",e)},expression:"mainData.back_type_other"}}),t._v(" "),a("Form-item",{staticClass:"fl",attrs:{"label-width":60,label:"共",prop:"back_order_nums",rules:"NO"!=t.mainData.back_order_type?[{required:!0,message:"不能为空",trigger:"change"},{pattern:/^[1-9]{1}$/,message:"请输1~9之间的整数",trigger:"change"}]:{}}},[a("i-input",{staticStyle:{width:"40px","text-align":"center"},attrs:{disabled:!t.isEditAble,placeholder:""},model:{value:t.mainData.back_order_nums,callback:function(e){t.$set(t.mainData,"back_order_nums",e)},expression:"mainData.back_order_nums"}}),t._v("份\n                                        ")],1)],1)],1)],1)])],1)]),t._v(" "),"detail"==t.operateType?a("Tab-pane",{attrs:{label:"项目报价表",name:"customer-02"}},[a("route-list",{attrs:{pm_pub:t.mainData.pm_pub}})],1):t._e(),t._v(" "),"detail"==t.operateType&&t.routeCount>0?a("Tab-pane",{attrs:{label:"分包信息",name:"customer-03"}},[a("route-assign")],1):t._e()],1)],1)])])},staticRenderFns:[]}},1718:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"contain-main"},[a("div",{staticClass:"clearfix"},[a("Row",[a("i-col",{attrs:{span:"24"}},[a("i-select",{staticStyle:{width:"150px"},attrs:{size:"small"},on:{"on-change":t.onSearch},model:{value:t.search.is_contract,callback:function(e){t.$set(t.search,"is_contract",e)},expression:"search.is_contract"}},[a("i-option",{attrs:{value:"1"}},[t._v("所有路线")]),t._v(" "),a("i-option",{attrs:{value:"Y"}},[t._v("已分包路线")]),t._v(" "),a("i-option",{attrs:{value:"N"}},[t._v("未分包路线")])],1),t._v(" "),a("i-select",{staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"请选择排序方式"},on:{"on-change":t.onSearch},model:{value:t.search.order_by,callback:function(e){t.$set(t.search,"order_by",e)},expression:"search.order_by"}},[a("i-option",{attrs:{value:"from"}},[t._v("按出发地排序")]),t._v(" "),a("i-option",{attrs:{value:"to"}},[t._v("按目的地排序")]),t._v(" "),a("i-option",{attrs:{value:"liner"}},[t._v("按承运商排序")])],1),t._v(" "),a("i-button",{attrs:{size:"small"},on:{click:t.add}},[t._v("选择承运商")]),t._v(" "),a("i-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("取消分包")])],1)],1)],1),t._v(" "),a("i-table",{staticClass:"mt10",attrs:{size:"small",data:t.routeReadyList,columns:t.columns},on:{"on-selection-change":t.onSelectionChange}})],1),t._v(" "),a("Modal",{attrs:{title:"选择成员",width:"415"},model:{value:t.routeAssignModel,callback:function(e){t.routeAssignModel=e},expression:"routeAssignModel"}},[a("div",{staticClass:"contain-main"},[a("p",[t._v("请选择成员：")]),t._v(" "),a("i-select",{staticClass:"mt10",model:{value:t.liner_id,callback:function(e){t.liner_id=e},expression:"liner_id"}},t._l(t.linerData.list,function(e){return a("i-option",{key:e,attrs:{value:e.lcid}},[t._v(t._s(e.liner_name))])}))],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{on:{click:t.cancelModel}},[t._v("取消")]),t._v(" "),a("i-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=9.92baa7680969dad7bdb3.js.map