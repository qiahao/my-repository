webpackJsonp([46],{1116:function(e,t,a){a(1511);var s=a(10)(a(1302),a(1679),"data-v-5cf5b360",null);e.exports=s.exports},1137:function(e,t,a){var s,i,n;!function(r,o){i=[t,a(61),a(150)],s=o,void 0!==(n="function"==typeof s?s.apply(t,i):s)&&(e.exports=n)}(0,function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(t),n=s(a),r={data:function(){return{tableParams:{list:[],selectList:[],page:1,pageSize:10,total:0,isCheckBoxClick:!1}}},watch:{},computed:{hasSelect:function(){return!!this.tableParams.selectList.length},tableSelectLength:function(){return this.tableParams.selectList.length},currentPage:function(){return this.tableParams.page},selectedIds:function(){var e=this;return this.tableParams.selectList.map(function(t){return t[e.pk]})}},methods:{loadList:function(){this.$Message.info("请在页面实例重写loadList")},onSearch:function(){this.tableParams.page=1,this.tableParams.selectList=[],this.loadList()},onReset:function(){this.$refs.searchForm&&(this.$refs.searchForm.resetFields(),this.onRangeChange&&"function"==typeof this.onRangeChange&&(this.rangeTime=[],this.onRangeChange([])))},onSelectionChange:function(e){this.tableParams.selectList=(0,n.default)(e),this.tableParams.isCheckBoxClick=!0},onPageChange:function(e){this.tableParams.page=e,this.tableParams.selectList=[],this.loadList()},onPageSizeChange:function(e){this.tableParams.pageSize=e,this.onSearch()},assignQuery:function(e){return(0,i.default)({page:this.tableParams.page,page_size:this.tableParams.pageSize},e)}}};e.default=r})},1302:function(e,t,a){(function(s){var i,n,r;!function(s,o){n=[t,a(61),a(1137),a(494)],i=o,void 0!==(r="function"==typeof i?i.apply(t,n):i)&&(e.exports=r)}(0,function(e,t,a,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(t),o=n(a),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i);e.default={name:"siteList",data:function(){var e=this;this.$createElement;return{conditionList:[{text:"全部",key:""},{text:"自有网点",key:"0"},{text:"合作网点",key:"1"}],conditionList2:[{text:"发出邀请",key:"3"},{text:"收到邀请",key:"4"},{text:"已拒绝邀请",key:"5"},{text:"已取消合作",key:"6"}],columns:[{type:"selection",width:60,align:"center"},{title:"名称",key:"company_name",width:289,render:function(t,a){return t("span",{class:"text-link",on:{click:function(){e.handler2Detail(a.row.id)}}},[a.row.company_name])}},{width:160,title:"来源",key:"partener_type",render:function(e,t){return e("span",[["自有网点","合作网点","合作公司"][t.row.partener_type]])}},{title:"所在地",key:"area"},{width:120,title:"联系人",key:"link_man"},{width:150,title:"联系方式",key:"link_tel"},{width:150,title:"承运次数",key:"accept_count"}],filterType:"",search:{company_name:"",partener_type:"",partener_status:"Y",invite_type:"",area_code:"",area_addr:"",link_man:"",link_tel:""},cancelModal:{show:!1},agreeModal:{show:!1},refuseModal:{show:!1},buttonStatus:{invite:!1,cancel:!0,modify:!0,agree:!0,refuse:!0}}},mixins:[o.default],watch:{"tableParams.selectList":function(e,t){if(this.tableSelectLength){var a={modify:!1,cancel:!1,agree:!1,refuse:!1};e.forEach(function(e){"D"==e.partener_status&&"1"==e.invite_type||(a.agree=!0,a.refuse=!0),"Y"!=e.partener_status&&(a.cancel=!0)}),(this.tableSelectLength>1||"0"!=e[0].invite_type)&&(a.modify=!0),this.buttonStatus=(0,r.default)({},a)}else this.buttonStatus={modify:!0,cancel:!0,agree:!0,refuse:!0}},filterType:function(e,t){""===e||"0"===e||"1"===e||"2"===e?(this.search.partener_type=e,this.search.partener_status="Y",this.search.invite_type=""):"3"===e||"4"===e?(this.search.partener_type="",this.search.partener_status="D",this.search.invite_type="3"===e?"0":"1"):"5"!==e&&"6"!==e||(this.search.partener_type="",this.search.invite_type="",this.search.partener_status="5"===e?"N":"CN"),this.onSearch()}},methods:{area_change:function(e){var t=e.split("$");this.parterDetail.partener_area_code=t[0],this.parterDetail.partener_area=t[1]},loadList:function(){var e=this,t=this.assignQuery(this.search);l.siteList(t).then(function(t){e.tableParams.total=t.resultObj.total,e.tableParams.list=t.resultObj.list,e.tableParams.selectList=[]})},handler2Detail:function(e){this.$router.push({name:"siteV1Detail",params:{id:e}})},doModify:function(){this.directDetail(this.tableParams.selectList[0].id)},doInvite:function(){this.$router.push({name:"siteV1New"})},directDetail:function(){this.$router.push({name:"siteV1Detail"})},doCancel:function(){if(!this.tableSelectLength)return this.$Message.error("请勾选合作网点");this.cancelModal.show=!0},confirmCancel:function(){var e=this,t="";this.tableParams.selectList.forEach(function(e,a){t+=e.id+","});var a={partener_ids:t.replace(/^(.*?),$/g,"$1")};l.siteCancel(a).then(function(t){e.loadList(),e.$Message.success(t.resultInfo)})},doRefuse:function(){this.refuseModal.show=!0},confirmRefuse:function(){var e=this,t="";this.tableParams.selectList.forEach(function(e,a){t+=e.id+","});var a={partener_ids:t.replace(/^(.*?),$/g,"$1")};l.siteRefuse(a).then(function(t){e.$Message.success(t.resultInfo),e.loadList(),e.refuseModal.show=!1})},doAgree:function(){this.agreeModal.show=!0},confirmAgree:function(){var e=this,t="";this.tableParams.selectList.forEach(function(e,a){t+=e.id+","});var a={partener_ids:t.replace(/^(.*?),$/g,"$1")};l.siteAgree(a).then(function(t){e.$Message.success(t.resultInfo),e.loadList(),e.agreeModal.show=!1})}},created:function(){this.loadList()},mounted:function(){var e=this;s.$on("site-list-reload",function(){e.onSearch()})}}})}).call(t,a(227))},1423:function(e,t,a){t=e.exports=a(1083)(),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},1511:function(e,t,a){var s=a(1423);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(1084)("22c48613",s,!0)},1679:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"contain-head"},[a("div",[a("search-filter",{attrs:{list:e.conditionList},on:{"on-change":e.onSearch},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}}),e._v(" "),a("search-filter",{staticClass:"ml10",attrs:{list:e.conditionList2},on:{"on-change":e.onSearch},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}}),e._v(" "),a("Button-group",[a("i-button",{attrs:{type:"primary",disabled:e.buttonStatus.invite},on:{click:e.doInvite}},[e._v("邀请")]),e._v(" "),a("i-button",{attrs:{type:"primary",disabled:e.buttonStatus.cancel},on:{click:e.doCancel}},[e._v("取消合作")]),e._v(" "),a("i-button",{attrs:{type:"primary",disabled:e.buttonStatus.modify},on:{click:e.doModify}},[e._v("修改")]),e._v(" "),a("i-button",{attrs:{type:"primary",disabled:e.buttonStatus.agree},on:{click:e.doAgree}},[e._v("同意")]),e._v(" "),a("i-button",{attrs:{type:"primary",disabled:e.buttonStatus.refuse},on:{click:e.doRefuse}},[e._v("拒绝")])],1)],1)]),e._v(" "),a("div",{staticClass:"contain-main"},[a("i-table",{ref:"listTable",attrs:{data:e.tableParams.list,stripe:"",columns:e.columns},on:{"on-selection-change":e.onSelectionChange}}),e._v(" "),a("div",{staticClass:"page-wrapper"},[a("Page",{attrs:{total:e.tableParams.total,"show-sizer":"","show-elevator":"",current:e.currentPage},on:{"on-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),e._v(" "),a("Modal",{attrs:{title:"是否取消合作关系"},on:{"on-ok":e.confirmCancel},model:{value:e.cancelModal.show,callback:function(t){e.$set(e.cancelModal,"show",t)},expression:"cancelModal.show"}},[1==e.tableParams.selectList.length?a("div",[a("p",[e._v("名称："+e._s(e.tableParams.selectList[0].company_name))]),e._v(" "),a("p",[e._v("所在地："+e._s(e.tableParams.selectList[0].area))]),e._v(" "),a("p",[e._v("联系人："+e._s(e.tableParams.selectList[0].link_man))]),e._v(" "),a("p",[e._v("联系方式："+e._s(e.tableParams.selectList[0].link_tel))])]):a("div",[a("p",[e._v("确认解除"+e._s(e.tableParams.selectList.length)+"个合作站点的合作关系？")])])]),e._v(" "),a("Modal",{attrs:{title:"确认接受邀请？"},on:{"on-ok":e.confirmAgree},model:{value:e.agreeModal.show,callback:function(t){e.$set(e.agreeModal,"show",t)},expression:"agreeModal.show"}},[1==e.tableParams.selectList.length?a("div",[a("p",[e._v("名称："+e._s(e.tableParams.selectList[0].company_name))]),e._v(" "),a("p",[e._v("所在地："+e._s(e.tableParams.selectList[0].area))]),e._v(" "),a("p",[e._v("联系人："+e._s(e.tableParams.selectList[0].link_man))]),e._v(" "),a("p",[e._v("联系方式："+e._s(e.tableParams.selectList[0].link_tel))])]):a("div",[a("p",[e._v("确认接受"+e._s(e.tableParams.selectList.length)+"个合作站点的邀请？")])])]),e._v(" "),a("Modal",{attrs:{title:"确认拒绝邀请？"},on:{"on-ok":e.confirmRefuse},model:{value:e.refuseModal.show,callback:function(t){e.$set(e.refuseModal,"show",t)},expression:"refuseModal.show"}},[1==e.tableParams.selectList.length?a("div",[a("p",[e._v("名称："+e._s(e.tableParams.selectList[0].company_name))]),e._v(" "),a("p",[e._v("所在地："+e._s(e.tableParams.selectList[0].area))]),e._v(" "),a("p",[e._v("联系人："+e._s(e.tableParams.selectList[0].link_man))]),e._v(" "),a("p",[e._v("联系方式："+e._s(e.tableParams.selectList[0].link_tel))])]):a("div",[a("p",[e._v("确认拒绝"+e._s(e.tableParams.selectList.length)+"个合作站点的邀请？")])])]),e._v(" "),a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=46.2437dfe6091504fa3371.js.map